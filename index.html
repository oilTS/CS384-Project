<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8" />
<title>CS384 — ใส่รหัสชุดทดสอบ</title>
<link rel="stylesheet" href="style.css" />
<script src="main.js" defer></script>
</head>
<body>
  <h1>CS384 — เริ่มการทดลอง</h1>

  <p>กรุณากรอกรหัสชุดทดสอบของคุณ (S1, S2, S3, S4)</p>
  <div class="form-row">
    <input id="codeInput" placeholder="เช่น S1" />
    <button id="startBtn">เริ่ม</button>
  </div>
  <div id="codeError" class="error" style="display:none"></div>

<script>
document.getElementById("startBtn").addEventListener("click", ()=>{
  const code = document.getElementById("codeInput").value.trim().toUpperCase();
  const err = document.getElementById("codeError");
  err.style.display = "none";
  if (!["S1","S2","S3","S4"].includes(code)) {
    err.textContent = "รหัสไม่ถูกต้อง — กรุณากรอก S1, S2, S3 หรือ S4";
    err.style.display = "block";
    return;
  }

  // Decide whether Phase1 is read or listen
  const cond = window.Experiment.CONDITION[code];
  if (!cond) {
    err.textContent = "สคริปต์ยังไม่โหลดหรือรหัสผิด";
    err.style.display = "block";
    return;
  }

  // cond.first indicates e.g. "readA" or "listenB"
  if (cond.first.startsWith("read")) {
    window.location.href = `phase1_read_ready.html?set=${code}`;
  } else {
    window.location.href = `phase1_listen_ready.html?set=${code}`;
  }
});
</script>
</body>
</html>
