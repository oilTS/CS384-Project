<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>р╣Ар╕Хр╕гр╕╡р╕вр╕бр╕Юр╕гр╣Йр╕нр╕бр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕Яр╕▒р╕З</title>
<link rel="stylesheet" href="style.css">
<script src="main.js"></script>
</head>

<body>
<h2>р╣Ар╕Хр╕гр╕╡р╕вр╕бр╕Юр╕гр╣Йр╕нр╕бр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕Яр╕▒р╕Зр╣Ар╕кр╕╡р╕вр╕З</h2>

<p>р╕Бр╣Ир╕нр╕Щр╣Ар╕гр╕┤р╣Ир╕бр╕Бр╕▓р╕гр╕Яр╕▒р╕З р╕Бр╕гр╕╕р╕Ур╕▓р╕Чр╕Фр╕кр╕нр╕Ър╣Ар╕кр╕╡р╕вр╕Зр╕Бр╣Ир╕нр╕Щ</p>
<p class="notice">р╣Ар╕кр╕╡р╕вр╕Зр╕Ир╕░р╣Ар╕ер╣Ир╕Щр╣Др╕Фр╣Йр╣Ар╕Юр╕╡р╕вр╕Зр╕Др╕гр╕▒р╣Йр╕Зр╣Ар╕Фр╕╡р╕вр╕з р╣Др╕бр╣Ир╕бр╕╡р╕лр╕вр╕╕р╕Ф р╣Др╕бр╣Ир╕бр╕╡р╕Бр╕гр╕н</p>

<button id="testBtn">ЁЯФК р╕Чр╕Фр╕кр╕нр╕Ър╣Ар╕кр╕╡р╕вр╕З</button>
<button id="goBtn" disabled>р╕Йр╕▒р╕Щр╣Др╕Фр╣Йр╕вр╕┤р╕Щр╣Бр╕ер╣Йр╕з</button>

<p id="msg" class="error"></p>

<script>
let tested = false;

// р╣Ар╕бр╕╖р╣Ир╕нр╕Бр╕Ф "р╕Чр╕Фр╕кр╕нр╕Ър╣Ар╕кр╕╡р╕вр╕З"
document.getElementById("testBtn").onclick = () => {
    const letter = getParam("audio") || getParam("article") || "A";

    const audio = new Audio(`audio/test.mp3`);
    audio.play();

    audio.onplay = () => {
        tested = true;
        document.getElementById("goBtn").disabled = false;
        document.getElementById("msg").textContent = "";
    };
};

// р╣Ар╕бр╕╖р╣Ир╕нр╕Бр╕Ф "р╕Йр╕▒р╕Щр╣Др╕Фр╣Йр╕вр╕┤р╕Щр╣Бр╕ер╣Йр╕з"
document.getElementById("goBtn").onclick = () => {
    if (!tested) {
        document.getElementById("msg").textContent = "р╕Бр╕гр╕╕р╕Ур╕▓р╕Чр╕Фр╕кр╕нр╕Ър╣Ар╕кр╕╡р╕вр╕Зр╕Бр╣Ир╕нр╕Щ";
        return;
    }

    const set = getParam("set");
    const letter = getParam("audio");

    // р╣Др╕Ыр╕лр╕Щр╣Йр╕▓р╣Ар╕ер╣Ир╕Щр╣Ар╕кр╕╡р╕вр╕Зр╕Ир╕гр╕┤р╕З
    window.location = `phase1_listen.html?set=${set}&audio=${letter}`;
};
</script>

</body>
</html>
